<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Update local lensfun database for Darktable | Nature and Human</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />

    

        
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body);
        });
    </script>

    
    <link rel="stylesheet" href="/css/highlightjs/styles/github.css">
    <script src="/css/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

  
    <header>
      <nav>
        <ul>
          
          
          <li class="nav-menu">
              <a href="https://zian999.github.io/en">/home/en</a>
          </li>
          
          
          <li class="nav-menu">
            <a href="/tags/">~/Tags</a>
          </li>
          
          
          <li class="nav-menu">
            <a href="/zh">~/中文</a>
          </li>
          

          
          
          <li class="nav-feed">
            <a href="/index.xml">[rss]</a>
          </li>
          

        </ul>
      </nav>
    </header>
  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">Update local lensfun database for Darktable</span></h1>

<h2 class="date">2020/02/28</h2>
<p class="terms">
  
  
  Tags: <a href="/tags/photography">photography</a> <a href="/tags/darktable">Darktable</a> 
  
  
</p>
</div>



<main>
<p><strong>I just give up using Lightroom.</strong></p>
<p>Because I had to reinstall my system after Christmas, so I choose to try and install Manjaro along with the OEM Windows10. Taking this opportunity, I spent some time transfered all my photo collections from Lightroom 6 to Darktable.</p>
<p>The darktable used Lensfun library to perform lens correction. Lensfun have collected a lot of lens and camera data. By now (2020-02-28) there&rsquo;re 1057 lenses in the database, and all the popular cameras are covered. The coverage can be checked <a href="https://wilson.bronger.org/lensfun_coverage.html">here</a> or in <a href="https://github.com/lensfun/lensfun">Lensfun project Github page</a>. If the lens one use is not in the database now, one can choose to contribute to project by taking and uploading some photos to create calilbration data. There&rsquo;s a good tutorial <a href="https://pixls.us/articles/create-lens-calibration-data-for-lensfun/">here</a>.</p>
<p>I&rsquo;m running the newest version of Darktable, and the version of Lensfun in my system (manjaro) is also newset. However, I can&rsquo;t find my lens in the Lens Correction module, although it&rsquo;s in the coverage list. According to <a href="https://www.dpreview.com/forums/thread/4363674">this post</a> and <a href="https://discuss.pixls.us/t/darktable-lensfun2/12457">this one</a>, it seems that we can update the local Lensfun database manually by the command <code>lensfun-update-data</code>. No parameters are needed. If you want to update the database system-wide, you need to add <code>sudo</code> before the command. After that, my lens appeared in the list.</p>
<p>&mdash; updated 17:36 March 2nd, 2020 &mdash;</p>
<p>If you&rsquo;re using Windows, according to the <a href="https://github.com/lensfun/lensfun/issues/963">answer provided by @sarunasb</a>, you just need to:</p>
<ol>
<li>
<p>Downloaded the <code>xml</code> file(s) containing tha cameras or lenses you need from <a href="https://github.com/lensfun/lensfun/tree/master/data/db">Lensfun&rsquo;s database</a>, which has been moved to Github from Sourceforge.</p>
</li>
<li>
<p>Find the Lensfun database files installed in your system with Darktable, which could be <code>C:\Program Files\darktable\share\lensfun\version_1</code>.</p>
</li>
<li>
<p>Update the correction files with the one you just downloaded. I.e., just copy downloaded <code>xml</code> to the local location in step 2 (e.g., <code>C:\Program Files\darktable\share\lensfun\version_1</code>), overwriting existing (needed to confirm admin access prompt).</p>
</li>
<li>
<p>Restarted darktable and the previosuly missing lens became available.</p>
</li>
</ol>

</main>

<br/><hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'tchkm6';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <footer>
      
<script>
(function() {
  function center_el(tagName) {
    var tags = document.getElementsByTagName(tagName), i, tag;
    for (i = 0; i < tags.length; i++) {
      tag = tags[i];
      var parent = tag.parentElement;
      
      if (parent.childNodes.length === 1) {
        
        if (parent.nodeName === 'A') {
          parent = parent.parentElement;
          if (parent.childNodes.length != 1) continue;
        }
        if (parent.nodeName === 'P') parent.style.textAlign = 'center';
      }
    }
  }
  var tagNames = ['img', 'embed', 'object'];
  for (var i = 0; i < tagNames.length; i++) {
    center_el(tagNames[i]);
  }
})();
</script>

      
      <hr/>
      <a href="/about/">About</a> | <a href="http://img.gg/59aLicM">Nikon Image Space</a> | <a href="https://www.flickr.com/photos/48159639@N04/">Flickr</a>
      
    </footer>
  </body>
</html>

